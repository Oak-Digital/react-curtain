{"version":3,"file":"CurtainContext.stories-8ccb3747.js","sources":["../../src/stories/CurtainContext/context.tsx","../../src/stories/CurtainContext/index.tsx"],"sourcesContent":["import { createContext, ReactNode, useCallback, useContext, useState } from 'react';\n\nexport interface CurtainContextValue {\n    counter: number;\n    incrementCounter: () => void;\n}\n\nexport const CurtainContext = createContext<CurtainContextValue>({} as CurtainContextValue);\n\nexport const useCurtainContext = () => {\n    const context = useContext(CurtainContext);\n    return context;\n};\n\nexport const CurtainContextProvider = ({ children }: { children: ReactNode }) => {\n    const [counter, setCounter] = useState(0);\n    const incrementCounter = useCallback(() => {\n        setCounter((prev) => prev + 1);\n    }, []);\n\n    const value: CurtainContextValue = {\n        counter,\n        incrementCounter,\n    };\n\n    return <CurtainContext.Provider value={value}>{children}</CurtainContext.Provider>;\n};\n","import { FC, useMemo, useState } from 'react';\nimport { Curtain } from '../../components';\nimport { CurtainContext, CurtainContextProvider, useCurtainContext } from './context';\n\nexport interface CurtainContextComponentProps {\n    withContexts?: boolean;\n}\n\nexport const CurtainContextComponent = ({ withContexts = true }: CurtainContextComponentProps) => {\n    return (\n        <CurtainContextProvider>\n            <CurtainContextComponentInner withContexts={withContexts} />\n        </CurtainContextProvider>\n    );\n};\n\nexport const CurtainContextComponentInner = ({ withContexts }: CurtainContextComponentProps) => {\n    const [visible, setVisible] = useState(false);\n    const onClick = async () => {\n        setVisible(true);\n\n        await new Promise((resolve) => setTimeout(resolve, 1000));\n\n        setVisible(false);\n    };\n\n    const memoedContexts = useMemo(() => (withContexts ? [CurtainContext] : []), [withContexts]);\n\n    return (\n        <div>\n            <Curtain visible={visible} contexts={memoedContexts}>\n                <div style={{ textAlign: 'right' }}>\n                    <Button onClick={onClick} />\n                </div>\n            </Curtain>\n        </div>\n    );\n};\n\ntype ButtonProps = {\n    onClick: () => void;\n};\n\nconst Button: FC<ButtonProps> = ({ onClick }) => {\n    const { counter, incrementCounter } = useCurtainContext();\n    const internalOnClick = () => {\n        incrementCounter();\n        onClick();\n    };\n    return <button onClick={internalOnClick}>Clicked: {counter}</button>;\n};\n"],"names":["CurtainContext","createContext","useCurtainContext","useContext","CurtainContextProvider","children","counter","setCounter","useState","incrementCounter","useCallback","prev","value","jsx","CurtainContextComponent","withContexts","CurtainContextComponentInner","visible","setVisible","onClick","resolve","memoedContexts","useMemo","Curtain","Button","internalOnClick","jsxs"],"mappings":"gIAOO,MAAAA,EAAAC,EAAAA,cAAA,CAAA,CAAA,EAEAC,EAAA,IACHC,aAAAH,CAAA,EAIGI,EAAA,CAAA,CAAA,SAAAC,KAAA,CACH,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,CAAA,EACAC,EAAAC,EAAAA,YAAA,IAAA,CACIH,EAAAI,GAAAA,EAAA,CAAA,CAA6B,EAAA,CAAA,CAAA,EAGjCC,EAAA,CAAmC,QAAAN,EAC/B,iBAAAG,CACA,EAGJ,OAAAI,EAAAA,IAAAb,EAAA,SAAA,CAAA,MAAAY,EAAA,SAAAP,CAAA,CAAA,CACJ,kIClBO,MAAAS,EAAA,CAAA,CAAA,aAAAC,EAAA,MACHF,EAAA,IAAAT,EAAA,CAAA,SAAAS,EAAAA,IAAAG,EAAA,CAAA,aAAAD,EAAA,CAAA,CAAA,EAOGC,EAAA,CAAA,CAAA,aAAAD,KAAA,CACH,KAAA,CAAAE,EAAAC,CAAA,EAAAV,EAAA,SAAA,EAAA,EACAW,EAAA,SAAA,CACID,EAAA,EAAA,EAEA,MAAA,IAAA,QAAAE,GAAA,WAAAA,EAAA,GAAA,CAAA,EAEAF,EAAA,EAAA,CAAgB,EAGpBG,EAAAC,UAAA,IAAAP,EAAA,CAAAf,CAAA,EAAA,CAAA,EAAA,CAAAe,CAAA,CAAA,EAEA,OAAAF,MAAA,MAAA,CAAA,SAAAA,EAAAA,IAAAU,EAAA,CAAA,QAAAN,EAAA,SAAAI,EAAA,SAAAR,EAAA,IAAA,MAAA,CAAA,MAAA,CAAA,UAAA,OAAA,EAAA,SAAAA,EAAA,IAAAW,EAAA,CAAA,QAAAL,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CASJ,EAMAK,EAAA,CAAA,CAAA,QAAAL,KAAA,CACI,KAAA,CAAA,QAAAb,EAAA,iBAAAG,CAAA,EAAAP,EAAA,EACAuB,EAAA,IAAA,CACIhB,IACAU,GAAQ,EAEZ,OAAAO,EAAA,KAAA,SAAA,CAAA,QAAAD,EAAA,SAAA,CAAyC,YAAAnB,CAAU,CAAA,CAAA,CACvD;;"}